// Comprise of list of objects containing all the relevant information about the nodes.
var ParseData = {
    "Root": {
        "state": {
            "expanded": true,
            "highlighted": false
        },
        "children": {
            "Node_1": {
                "state": {
                    "expanded": true,
                    "highlighted": false
                },
                "children": {
                    "Node_2": {
                        "state": {
                            "expanded": true,
                            "highlighted": false
                        },
                        "children": {
                            "Node_5": {
                                "state": {
                                    "expanded": true,
                                    "highlighted": false
                                },
                                "children": {
                                    "Node_11": {
                                        "state": {
                                            "expanded": true,
                                            "highlighted": false
                                        },
                                        "children": null,
                                        "parents": [
                                            "Root",
                                            "Node_1",
                                            "Node_2",
                                            "Node_5"
                                        ],
                                        "level": 4
                                    }
                                },
                                "parents": [
                                    "Root",
                                    "Node_1",
                                    "Node_2"
                                ],
                                "level": 3
                            },
                            "Node_6": {
                                "state": {
                                    "expanded": true,
                                    "highlighted": false
                                },
                                "children": {
                                    "Node_12": {
                                        "state": {
                                            "expanded": true,
                                            "highlighted": false
                                        },
                                        "children": null,
                                        "parents": [
                                            "Root",
                                            "Node_1",
                                            "Node_2",
                                            "Node_6"
                                        ],
                                        "level": 4
                                    },
                                    "Node_20": {
                                        "state": {
                                            "expanded": true,
                                            "highlighted": false
                                        },
                                        "children": null,
                                        "parents": [
                                            "Root",
                                            "Node_1",
                                            "Node_2",
                                            "Node_6"
                                        ],
                                        "level": 4
                                    }
                                },
                                "parents": [
                                    "Root",
                                    "Node_1",
                                    "Node_2"
                                ],
                                "level": 3
                            }
                        },
                        "parents": [
                            "Root",
                            "Node_1"
                        ],
                        "level": 2
                    },
                    "Node_3": {
                        "state": {
                            "expanded": true,
                            "highlighted": false
                        },
                        "children": {
                            "Node_7": {
                                "state": {
                                    "expanded": true,
                                    "highlighted": false
                                },
                                "children": {
                                    "Node_14": {
                                        "state": {
                                            "expanded": true,
                                            "highlighted": false
                                        },
                                        "children": null,
                                        "parents": [
                                            "Root",
                                            "Node_1",
                                            "Node_3",
                                            "Node_7"
                                        ],
                                        "level": 4
                                    },
                                    "Node_21": {
                                        "state": {
                                            "expanded": true,
                                            "highlighted": false
                                        },
                                        "children": null,
                                        "parents": [
                                            "Root",
                                            "Node_1",
                                            "Node_3",
                                            "Node_7"
                                        ],
                                        "level": 4
                                    }
                                },
                                "parents": [
                                    "Root",
                                    "Node_1",
                                    "Node_3"
                                ],
                                "level": 3
                            }
                        },
                        "parents": [
                            "Root",
                            "Node_1"
                        ],
                        "level": 2
                    },
                    "Node_4": {
                        "state": {
                            "expanded": true,
                            "highlighted": false
                        },
                        "children": {
                            "Node_8": {
                                "state": {
                                    "expanded": true,
                                    "highlighted": false
                                },
                                "children": null,
                                "parents": [
                                    "Root",
                                    "Node_1",
                                    "Node_4"
                                ],
                                "level": 3
                            },
                            "Node_9": {
                                "state": {
                                    "expanded": true,
                                    "highlighted": false
                                },
                                "children": null,
                                "parents": [
                                    "Root",
                                    "Node_1",
                                    "Node_4"
                                ],
                                "level": 3
                            },
                            "Node_10": {
                                "state": {
                                    "expanded": true,
                                    "highlighted": false
                                },
                                "children": {
                                    "Node_22": {
                                        "state": {
                                            "expanded": true,
                                            "highlighted": false
                                        },
                                        "children": {
                                            "Node_23": {
                                                "state": {
                                                    "expanded": true,
                                                    "highlighted": false
                                                },
                                                "children": {
                                                    "Node_24": {
                                                        "state": {
                                                            "expanded": true,
                                                            "highlighted": false
                                                        },
                                                        "children": null,
                                                        "parents": [
                                                            "Root",
                                                            "Node_1",
                                                            "Node_4",
                                                            "Node_10",
                                                            "Node_22",
                                                            "Node_23"
                                                        ],
                                                        "level": 6
                                                    }
                                                },
                                                "parents": [
                                                    "Root",
                                                    "Node_1",
                                                    "Node_4",
                                                    "Node_10",
                                                    "Node_22"
                                                ],
                                                "level": 5
                                            }
                                        },
                                        "parents": [
                                            "Root",
                                            "Node_1",
                                            "Node_4",
                                            "Node_10"
                                        ],
                                        "level": 4
                                    }
                                },
                                "parents": [
                                    "Root",
                                    "Node_1",
                                    "Node_4"
                                ],
                                "level": 3
                            }
                        },
                        "parents": [
                            "Root",
                            "Node_1"
                        ],
                        "level": 2
                    }
                },
                "parents": [
                    "Root"
                ],
                "level": 1
            },
            "Node_100": {
                "state": {
                    "expanded": true,
                    "highlighted": false
                },
                "children": {
                    "Node_101": {
                        "state": {
                            "expanded": true,
                            "highlighted": false
                        },
                        "children": {
                            "Node_103": {
                                "state": {
                                    "expanded": true,
                                    "highlighted": false
                                },
                                "children": {
                                    "Node_106": {
                                        "state": {
                                            "expanded": true,
                                            "highlighted": false
                                        },
                                        "children": null,
                                        "parents": [
                                            "Root",
                                            "Node_100",
                                            "Node_101",
                                            "Node_103"
                                        ],
                                        "level": 4
                                    },
                                    "Node_107": {
                                        "state": {
                                            "expanded": true,
                                            "highlighted": false
                                        },
                                        "children": null,
                                        "parents": [
                                            "Root",
                                            "Node_100",
                                            "Node_101",
                                            "Node_103"
                                        ],
                                        "level": 4
                                    },
                                    "Node_108": {
                                        "state": {
                                            "expanded": true,
                                            "highlighted": false
                                        },
                                        "children": {
                                            "Node_109": {
                                                "state": {
                                                    "expanded": true,
                                                    "highlighted": false
                                                },
                                                "children": null,
                                                "parents": [
                                                    "Root",
                                                    "Node_100",
                                                    "Node_101",
                                                    "Node_103",
                                                    "Node_108"
                                                ],
                                                "level": 5
                                            },
                                            "Node_110": {
                                                "state": {
                                                    "expanded": true,
                                                    "highlighted": false
                                                },
                                                "children": null,
                                                "parents": [
                                                    "Root",
                                                    "Node_100",
                                                    "Node_101",
                                                    "Node_103",
                                                    "Node_108"
                                                ],
                                                "level": 5
                                            },
                                            "Node_111": {
                                                "state": {
                                                    "expanded": true,
                                                    "highlighted": false
                                                },
                                                "children": {
                                                    "Node_112": {
                                                        "state": {
                                                            "expanded": true,
                                                            "highlighted": false
                                                        },
                                                        "children": null,
                                                        "parents": [
                                                            "Root",
                                                            "Node_100",
                                                            "Node_101",
                                                            "Node_103",
                                                            "Node_108",
                                                            "Node_111"
                                                        ],
                                                        "level": 6
                                                    }
                                                },
                                                "parents": [
                                                    "Root",
                                                    "Node_100",
                                                    "Node_101",
                                                    "Node_103",
                                                    "Node_108"
                                                ],
                                                "level": 5
                                            }
                                        },
                                        "parents": [
                                            "Root",
                                            "Node_100",
                                            "Node_101",
                                            "Node_103"
                                        ],
                                        "level": 4
                                    }
                                },
                                "parents": [
                                    "Root",
                                    "Node_100",
                                    "Node_101"
                                ],
                                "level": 3
                            }
                        },
                        "parents": [
                            "Root",
                            "Node_100"
                        ],
                        "level": 2
                    },
                    "Node_102": {
                        "state": {
                            "expanded": true,
                            "highlighted": false
                        },
                        "children": {
                            "Node_104": {
                                "state": {
                                    "expanded": true,
                                    "highlighted": false
                                },
                                "children": null,
                                "parents": [
                                    "Root",
                                    "Node_100",
                                    "Node_102"
                                ],
                                "level": 3
                            },
                            "Node_105": {
                                "state": {
                                    "expanded": true,
                                    "highlighted": false
                                },
                                "children": null,
                                "parents": [
                                    "Root",
                                    "Node_100",
                                    "Node_102"
                                ],
                                "level": 3
                            }
                        },
                        "parents": [
                            "Root",
                            "Node_100"
                        ],
                        "level": 2
                    }
                },
                "parents": [
                    "Root"
                ],
                "level": 1
            }
        },
        "parents": [],
        "level": 0
    }
}

//Comprise of list of objects containing all the relevant information about the nodes.
var Data_Before_Parsing = [];

//Finding the Node_in the input data
function find(source, id)
{
    if(id == "Root") return source;
    //console.log(source.children);
    if(source.children == null) return source;
    var item = Object.keys(source.children);

    for(var i=0; i<item.length; i++)
    {
        if (item[i] == id)
        {
            return source;
        }

        if (source["children"][item[i]].children)
        {
            var subresult = find(source["children"][item[i]], id);
            if (subresult)
            return subresult;
        }
    }
    return null;
}


//Finding the child nodes for that particular Node_and store in the child array.
function find1(source, id)
{
    if(source.children == null) return source;
    var item = Object.keys(source.children);

    for(var i=0; i<item.length; i++)
    {
        child.push(item[i]);
        if (source["children"][item[i]].children)
        {
            var subresult = find1(source["children"][item[i]], id);
            if (subresult)
            return subresult;
        }
    }
    return null;
}


function findNodes(node_list) {
    //Normal call to the functions
    console.log(node_list);
    for (var m = 0; m < node_list.length; m++) {
        var objInfo = new Object();
        objInfo.name="";
        objInfo.descendant=[];
        objInfo.ascendant=[];
        objInfo.level;
        objInfo.expanded;
        objInfo.highlighted;

        var result = find(ParseData.Root, node_list[m]);
        console.log(result);
        var item = Object.keys(result.children);
        var name;

        for (var i = 0; i < item.length; i++) {
            if (item[i] == node_list[m]) {
                name =  item[i];
            }
        }

        child = [];

        if (node_list[m] != "Root") {
            var a = find1(result.children[node_list[m]]);
        } else {
            var a = find1(result);
        }

        if (node_list[m] != "Root") {
            objInfo.name = name;
            objInfo.descendant = child;
            objInfo.ascendant = result.children[node_list[m]].parents;
            objInfo.level = result.children[node_list[m]].level;
            objInfo.expanded = result.children[node_list[m]].state.expanded;
            objInfo.highlighted = result.children[node_list[m]].state.highlighted;
            Data_Before_Parsing.push(objInfo);
            console.log(objInfo);
        } else {
            objInfo.name = "Root";
            objInfo.descendant = child;
            objInfo.ascendant = result.parents;
            objInfo.level = result.level;
            objInfo.expanded = result.state.expanded;
            objInfo.highlighted = result.state.highlighted;
            Data_Before_Parsing.push(objInfo);
            console.log(objInfo);
        }
    }
    return Data_Before_Parsing;
}

//Finding the particular Node_and updating its attributes.
function findUpdate(source, id)
{
    //console.log(source.children);
     if(id == "Root") return source;
    if(source.children == null) return source;
    var item = Object.keys(source.children);

    for (var i = 0; i<item.length; i++) {
        if (item[i] == id) {
            return source;
        }
        if (source["children"][item[i]].children) {
            var subresult = find(source["children"][item[i]], id);
            if (subresult)
            return subresult;
        }
    }
    return null;
}




function updateNodes(complete_data_example){

for(var i=0; i<complete_data_example.length; i++)
{
  
  var result2 = findUpdate(ParseData.Root, complete_data_example[i].name);

  if(complete_data_example[i].name == "Root")
  {
     result2.state.highlighted = complete_data_example[i].highlighted;
     
     result2.state.expanded = complete_data_example[i].expanded;
     
  }
  else
  {
   result2.children[complete_data_example[i].name].state.highlighted = complete_data_example[i].highlighted;
   result2.children[complete_data_example[i].name].state.expanded = complete_data_example[i].expanded;
  }
 }
 
 return ParseData;
 
}


// var result2 = findUpdate(ParseData.Root, "Node_2");
// console.log(result2);
// console.log(result2.children["Node_2"].state.highlighted);
// result2.children["Node_2"].state.highlighted = true;
// console.log(result2.children["Node 2"].state.highlighted);
